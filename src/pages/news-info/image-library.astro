---
import LibraryImg from '@/src/components/Img_Library.astro';
import PageLayout from "@/src/layouts/PageLayout.astro";

// To update this page add the image to the "imageLibrary" folder then add its src to this array and give it some alt text. The alt text is used for the image title.

const ImagesArray = [
{src: '../assets/images/imageLibrary/img_1.jpg', alt: 'Trucks'},
{src: '../assets/images/imageLibrary/img_2.jpg', alt: 'Freight and Transit Connected Vehicles'},
{src: '../assets/images/imageLibrary/img_3.jpg', alt: 'Connected Traffic Signal'},
{src: '../assets/images/imageLibrary/img_4.jpg', alt: 'Street Car'},
{src: '../assets/images/imageLibrary/img_5.jpg', alt: 'Rush Hour Connected Vehicle Exit'},
{src: '../assets/images/imageLibrary/img_6.jpg', alt: 'Port'},
{src: '../assets/images/imageLibrary/img_7.jpg', alt: 'Vehicle Platooning'},
{src: '../assets/images/imageLibrary/img_8.jpg', alt: 'Passenger Car'},
{src: '../assets/images/imageLibrary/img_9.jpg', alt: 'Merging'},
{src: '../assets/images/imageLibrary/img_10.jpg', alt: 'Truck Convoy'},
{src: '../assets/images/imageLibrary/img_11.jpg', alt: 'Sample Connected Vehicle Applications'},
{src: '../assets/images/imageLibrary/img_12.jpg', alt: 'Connected Vehicles Traveling on Highway'},
{src: '../assets/images/imageLibrary/img_13.jpg', alt: 'Connected Vehicle Intersection Stop'},
{src: '../assets/images/imageLibrary/img_14.jpg', alt: 'Train Intersection'},
{src: '../assets/images/imageLibrary/img_15.png', alt: 'Semi Rural'},
{src: '../assets/images/imageLibrary/img_16.png', alt: 'Loading Truck Port'},
{src: '../assets/images/imageLibrary/img_17.png', alt: 'Intersection Wheelchair'},
{src: '../assets/images/imageLibrary/img_18.png', alt: 'Intersection Bike'},
{src: '../assets/images/imageLibrary/img_19.png', alt: 'Inside Smart Bus'},
{src: '../assets/images/imageLibrary/img_20.png', alt: 'Automated Vehicle Highway'},
{src: '../assets/images/imageLibrary/img_22.jpg', alt: 'Connected Vehicles Intersection'},
{src: '../assets/images/imageLibrary/img_24.jpg', alt: 'Connected Vehicles Intersection'},
{src: '../assets/images/imageLibrary/img_25.jpg', alt: 'CV Do Not Pass Dashboard Warning'},
{src: '../assets/images/imageLibrary/img_35.jpg', alt: 'CV Intersection Stop'},
{src: '../assets/images/imageLibrary/img_42.jpg', alt: 'CV Construction Zone Warning'},
{src: '../assets/images/imageLibrary/img_43.jpg', alt: 'CV Technology Assessment'},
{src: '../assets/images/imageLibrary/img_44.jpg', alt: 'Connected Vehicles Communicating at Intersection'},
{src: '../assets/images/imageLibrary/img_46.jpg', alt: 'Dynamic Road Side Platooning'},
{src: '../assets/images/imageLibrary/img_47.jpg', alt: 'Automated University Ride Sharing'},
{src: '../assets/images/imageLibrary/img_48.jpg', alt: 'How an Automated Vehicle Works'},
{src: '../assets/images/imageLibrary/img_51.jpg', alt: 'Connected Freight Carrier Highway'},
{src: '../assets/images/imageLibrary/img_52.jpg', alt: 'Connected Freight Carrier and Car'},
{src: '../assets/images/imageLibrary/img_53.jpg', alt: 'Truck Safety'},
{src: '../assets/images/imageLibrary/img_55.jpg', alt: 'Connected Vehicles Intersection'},
{src: '../assets/images/imageLibrary/img_57.jpg', alt: 'CV Approaching Warning'},
{src: '../assets/images/imageLibrary/img_58.jpg', alt: 'CV Technology Assessment'},
{src: '../assets/images/imageLibrary/V2X_KidSkateboard.png', alt: 'Skateboard interacting with a vehicle'},
{src: '../assets/images/imageLibrary/V2X_MotherKid.png', alt: 'Stroller interacting with a vehicle	'},
{src: '../assets/images/imageLibrary/V2X_WheelchairBus.png', alt: 'Wheelchair interacting with a bus	'},
{src: '../assets/images/imageLibrary/V2X_WomanBike.png', alt: 'Bicycle interacting with a vehicle'},
];

const keywords = [
  'Connected Vehicles',
  'Automated Vehicles',
  'Vehicle to Vehicle Communication',
  'Vehicle to Infrastructure Communication',
  'Vehicle to Everything Communication',
  'Connected Vehicle Technology',
  'Automated Vehicle Technology',
  'Connected Vehicle Applications',
  'Automated Vehicle Applications',
  'Connected Vehicle Safety',
  'Automated Vehicle Safety',
  'Connected Vehicle Research',
  'Automated Vehicle Research'
];

const description =
  'Explore our image library showcasing connected and automated vehicle technologies, applications, and research. Download high-resolution images for your projects.';
---



<style>

.grid-container {
    display: grid;
    vertical-align: top;
}

.widthcontroller {
  display: inline-block;
}

.widthcontroller p {
  width: 100%;
  box-sizing: border-box;
  margin: 0;
}

</style>
<PageLayout title="Image Library" keywords={keywords} description={description}>
  <Fragment slot="banner">
    Image Library
  </Fragment>
  <main>
  <h2 class="sideways blue">Images courtesy of the U.S. Department of Transportation</h2>
  <p>Click image for downloadable high resolution version. </p>


  <script>
    // Wait for the DOM to be fully loaded before attaching event listeners
    document.addEventListener('DOMContentLoaded', function() {
      // Modal container element
      let modal: HTMLElement | null = null;
      // Reference to the image element in the modal (displays the full-size image)
      let modalImg: HTMLImageElement | null = null;
      // Reference to the alt text element in the modal (for accessibility)
      let modalAlt: HTMLElement | null = null;

      // Function to open the modal and display the full-size image
      function openModal(card: HTMLElement) {
        // Get modal elements by their IDs
        modal = document.getElementById('astro-img-modal');
        modalImg = document.getElementById('astro-img-modal-img') as HTMLImageElement | null;
        modalAlt = document.getElementById('astro-img-modal-alt');
        const closeBtn = document.getElementById('astro-img-modal-close');
        const downloadBtn = document.getElementById('astro-img-modal-download');
        // Find the anchor with data-fullsize inside the card (contains the full-size image URL)
        const anchor = card.querySelector('a[data-fullsize]');
        const fullsize = anchor ? anchor.getAttribute('data-fullsize') : '';
        // Get the alt text from the image element
        const imgElem = card.querySelector('img');
        const alt = imgElem && imgElem.alt ? imgElem.alt : '';
        // If all required elements exist, show the modal and set image/download attributes
        if (modal && modalImg && fullsize) {
          modal.style.display = 'flex'; // Show modal
          modalImg.src = fullsize;      // Set full-size image
          modalImg.alt = alt;           // Set alt text for accessibility
          if (modalAlt) modalAlt.textContent = alt;
          if (downloadBtn) (downloadBtn as HTMLAnchorElement).href = fullsize; // Set download link
          document.body.style.overflow = 'hidden'; // Prevent background scroll
        }
        // Attach close event every time modal is opened (ensures it's always attached)
        if (closeBtn) {
          closeBtn.removeEventListener('click', closeModal); // Prevent duplicate
          closeBtn.addEventListener('click', closeModal);
        }
      }

      // Function to close the modal and restore scroll
      function closeModal() {
        modal = document.getElementById('astro-img-modal');
        if (modal) {
          modal.style.display = 'none'; // Hide modal
          document.body.style.overflow = '';
        }
      }

      // Attach click and keyboard event listeners to each image card
      document.querySelectorAll('.image-card').forEach(card => {
        // Open modal on click
        card.addEventListener('click', function() {
          openModal(card as HTMLElement);
        });
        // Open modal on Enter key (keyboard accessibility)
        card.addEventListener('keydown', function(e: KeyboardEvent) {
          if (e.key === 'Enter') openModal(card as HTMLElement);
        });
      });

      // Close modal when clicking the modal background
      document.addEventListener('click', function(e) {
        if (e.target && (e.target as HTMLElement).id === 'astro-img-modal') closeModal();
      });
    });
  </script>

  <style>
    .image-card {
      position: relative;
      cursor: pointer;
      overflow: hidden;
      border-radius: 0.5rem;
      transition: box-shadow 0.2s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }
    .image-card:hover .image-overlay {
      opacity: 1;
    }
    .image-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 94, 162, 0.85);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      font-weight: 600;
      opacity: 0;
      transition: opacity 0.2s;
      padding: 1rem;
      text-align: center;
    }
    .modal-bg {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.2s;
    }
    .modal-img {
      max-width: 90vw;
      max-height: 80vh;
      border-radius: 0.5rem;
      box-shadow: 0 4px 32px rgba(0,0,0,0.25);
      background: #fff;
      padding: 1rem;
    }
    .modal-close {
      position: absolute;
      top: 2rem;
      right: 2rem;
      font-size: 2rem;
      color: #fff;
      cursor: pointer;
      z-index: 1100;
      background: none;
      border: none;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>

  <div class="d-flex flex-wrap">
    {ImagesArray.map((img) => (
      <div class="p-2 widthcontroller">
        <div class="image-card" tabindex="0" aria-label={img.alt}>
          <LibraryImg imagePath={img.src} altText={img.alt} />
          <div class="image-overlay">{img.alt}</div>
        </div>
      </div>
    ))}
  </div>

  <div id="astro-img-modal" class="modal-bg" style="display:none;">
    <button id="astro-img-modal-close" class="modal-close" aria-label="Close">&times;</button>
    <img id="astro-img-modal-img" src="" alt="" class="modal-img" />
    <a id="astro-img-modal-download" href="" download style="position:absolute;bottom:2rem;right:2rem;z-index:1100;background:#005ea2;color:#fff;padding:0.75rem 1.5rem;border-radius:0.5rem;text-decoration:none;font-weight:600;box-shadow:0 2px 8px rgba(0,0,0,0.13);">Download</a>
    <div id="astro-img-modal-alt" style="display:none;"></div>
  </div>
</main>
<div class="container my-5 p-4">
<h3>For additional images please contact</h3>
<p>
<strong>Ocel, Norah P.E. PMP</strong><br/>
Program Manager<br/>
ITS Safety and Stakeholder Engagement and Communications<br/>
202-366-2639<br/>
<a href="mailto:Norah.Ocel@dot.gov">Norah.Ocel@dot.gov</a>
</p>
</div>
</PageLayout>